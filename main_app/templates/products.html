{% extends 'base-inner.html' %}
{% load staticfiles %}
{% load widget_tweaks %}

{% block content %}â€¨
<section class="product-page">
	<div class="container">
		<div class="section-heading text-center">
			<h1 class="display-4">Product Designs</h1>
			<p class="lead">Products designed & created just for you.</p>
			<hr class="hr">
			<p class=mb-0>All of these designs are available in different products, colors and sizes, for men, women and kids alike.</p>
			<p class=mb-0>You can even customize them, adding text and images if you would like - no really, you can!</p>
			<p>Seriously, there's no end to the fun - go take a look.</p>
		</div>
	  <!-- Creating a row for product cards -->
		<div class="row text-center pt-5">
		<!-- Looping over each product in the products list -->
		{% for product in products %}
				<!-- Creating a column for each product card -->
			<div class="col-3 product-panel">
			    <div class="hovereffect">
			        <div style="text-align:center;line-height:150%">

								{% if product.image %}
								    <img class="img-fluid" src="{{ product.image.url }}" />
								{% else %}
								    <img class="img-fluid" src="{{ product.image_url }}" />
								{% endif %}

		            <div class="overlay">
		                <h2>{{ product.name }}</h2>
		                <a class="btn btn-outline-white" href="/{{product.id}}/">PRODUCT DETAILS</a>
		            </div>
			            <h6>{{ product.name }}</h6>
			           by
			            <a href="/product/?username={{product.user.username}}"> {% if product.user.first_name and product.user.last_name %} {{product.user.first_name}} {{product.user.last_name}} {% else %} {{ product.user.username }} {% endif %}</a>
			        </div>
			    </div>
			    <button id ="likes" data-id="{{product.id}}" class="btn btn-mini btn-danger" type="button">
			      {% if product.likes > 0 %} Likes: {{ product.likes }} {% else %} Likes: 0 {% endif %}
			    </button>
			</div>
		  <!-- if last column in row -->
	      {% if forloop.counter|divisibleby:4 and not forloop.last %}
			</div><br><div class="row text-center">
	      {% endif %}
		{% endfor %}
		</div><br>

		{% if user.is_authenticated %}
		<!-- Adding form for adding new products-->
		<div class="row mt-5">
		<div class="col-5">
			<div class="product card card-default">
			  <div class="card-header">
			    <h3 class="card-title">Add Product</h3>
			  </div>
			  <div class="card-body">
			    <form enctype="multipart/form-data" action="post_url/" method="post" >
			      {% csrf_token %}
						{% include 'includes/form.html' with form=form %}
			      <input class="btn btn-product" type="submit" value="Submit" />
			    </form>
			  </div>
			</div>
		</div>

		<div class="col-1"></div>

		<div class="col-6">
			<h2>Right Column</h2>
		</div>

	</div>

		{% endif %}

			</div>
		</div>
</section>
{% endblock %}
